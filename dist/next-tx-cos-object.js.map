{"version":3,"sources":["next-tx-cos-object.js"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"next-tx-cos-object.js","sourcesContent":["(function () {\n  var global = global || this || window || Function('return this')();\n  var nx = global.nx || require('@feizheng/next-js-core2');\n  var NxTxAbstractCos = require('@feizheng/next-tx-abstract-cos');\n  var Promise = require('bluebird');\n  /* prettier-ignore */\n\n  var RETURN_KEY = function (item) { return { Key: item.Key }; };\n  var API_HOOKS = {\n    del: 'deleteObjectAsync',\n    dels: 'deleteMultipleObjectAsync'\n  };\n\n  var NxTxCosObject = nx.declare('nx.TxCosObject', {\n    extends: NxTxAbstractCos,\n    methods: {\n      'put,del,dels': function (inName) {\n        return function (inOptions) {\n          this.parseOptions(inOptions);\n          return this.cos[API_HOOKS[inName] || inName + 'ObjectAsync'](inOptions);\n        };\n      },\n      empty: function (inOptions) {\n        var self = this;\n        this.parseOptions(inOptions);\n\n        return new Promise(function (resolve) {\n          self.cos\n            .getBucketAsync(inOptions)\n            .then(function (res) {\n              var objs = res.Contents.map(RETURN_KEY);\n              var reqs = nx.mix(null, inOptions, { Objects: objs });\n              self.dels(reqs).then(resolve).catch(resolve);\n            })\n            .catch(resolve);\n        });\n      }\n    }\n  });\n\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = NxTxCosObject;\n  }\n})();\n"]}